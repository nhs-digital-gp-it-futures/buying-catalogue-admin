{% extends 'includes/layout.njk' %}
{% from 'components/back-link/macro.njk' import backLink %}
{% from 'components/hint/macro.njk' import hint %}
{% from 'components/bc-button/macro.njk' import bcButton %}
{% from 'components/bc-error-summary/macro.njk' import bcErrorSummary %}
{% from 'components/radiobutton-options/macro.njk' import radiobuttonOptions %}

{% block body %}
  <div class="nhsuk-width-container" data-test-id="organisation-page">
    <div data-test-id="go-back-link">
      {{ backLink({
        "href": "/admin/organisations/" + organisation.organisationId,
        "text": "Back"
      }) }}
    </div>

    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-two-thirds">
        {% if (errors and errors.errorList and errors.errorList.length > 0) %}
          {{ bcErrorSummary({
            errors: errors.errorList
          }) }}
        {% endif %}
        <h1 data-test-id="org-page-title" class="nhsuk-u-margin-top-7 nhsuk-u-margin-bottom-3">Add organisation to {{ organisation.name }}</h1>
        <p data-test-id="organisation-details-subheading" class="nhsuk-heading-l nhsuk-u-font-size-22 nhsuk-u-margin-bottom-7">
          {{ organisation.name }} will then be able to create orders on this organisation's behalf.
        </p>
        <form method="POST">
          <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
          {% set additionalAdvice = "Select one option." %}
          {% if errors %}
            {% set additionalAdvice = null %}
          {% endif %}
          {{
            radiobuttonOptions({
              question: {
                id: "relatedOrganisationId",
                mainAdvice: "Which organisation are you looking for?",
                additionalAdvice: additionalAdvice,
                options: unrelatedOrgsRadio,
                error: errors
              }
            })
          }}

          {{ bcButton({
              dataTestId: "submit-button",
              type: "submit",
              text: "Confirm"
          })}}
        </form>
      </div>
    </div>
  </div>
{% endblock %}
